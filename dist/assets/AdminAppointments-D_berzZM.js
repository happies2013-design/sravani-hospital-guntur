import{c as ne,r as i,j as e,h as oe,u as le,i as ie,k as z,l as $,m as y,n as H,o as ce,p as de,q as pe,s as me,t as ue,F as xe,D as he,v as fe,w as ge,x as ve,L as O,B as g,b as E,C as b,P as je,M as Ce,S as ye,y as D}from"./index-CKDgLHdI.js";import{u as Ne}from"./useMutation-GFGH00zp.js";import{I as be}from"./input-CGa53iuT.js";import{B as F}from"./badge-3BHMSwro.js";import{C as k,a as M,b as Pe,c as we}from"./card-OlHfPrnA.js";import{R as Ae,A as q,c as B,C as Se,a as _e,S as Re,b as Oe,d as Ee,e as De,f as Fe}from"./select-Bu5G1x13.js";import{P as ke,D as Me,a as Ie,E as Te,b as Le,c as P,d as Ve,e as ze,f as $e,g as He}from"./dropdown-menu-BQ5SA-tU.js";import{C as qe}from"./calendar-DRAHtu_D.js";import{A as Be}from"./arrow-left-B8Pbgmyj.js";import{D as We}from"./index-C3M8ivUF.js";import{S as Qe}from"./search-D2cIqzeq.js";import{F as Ke}from"./filter-B0R_py3F.js";import{U as I}from"./user-BbF-KwOM.js";import{C as T}from"./circle-check-CTllmtq5.js";import{f as L}from"./format-SmSpYad1.js";import"./chevron-right-BSKquAwy.js";import"./chevron-left-B9hVf-w9.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ge=ne("CircleX",Ue);function Xe(t){const n=Ze(t),r=i.forwardRef((o,s)=>{const{children:l,...a}=o,c=i.Children.toArray(l),p=c.find(Ye);if(p){const m=p.props.children,j=c.map(x=>x===p?i.Children.count(m)>1?i.Children.only(null):i.isValidElement(m)?m.props.children:null:x);return e.jsx(n,{...a,ref:s,children:i.isValidElement(m)?i.cloneElement(m,void 0,j):null})}return e.jsx(n,{...a,ref:s,children:l})});return r.displayName=`${t}.Slot`,r}function Ze(t){const n=i.forwardRef((r,o)=>{const{children:s,...l}=r;if(i.isValidElement(s)){const a=tt(s),c=et(l,s.props);return s.type!==i.Fragment&&(c.ref=o?oe(o,a):a),i.cloneElement(s,c)}return i.Children.count(s)>1?i.Children.only(null):null});return n.displayName=`${t}.SlotClone`,n}var Je=Symbol("radix.slottable");function Ye(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Je}function et(t,n){const r={...n};for(const o in n){const s=t[o],l=n[o];/^on[A-Z]/.test(o)?s&&l?r[o]=(...c)=>{const p=l(...c);return s(...c),p}:s&&(r[o]=s):o==="style"?r[o]={...s,...l}:o==="className"&&(r[o]=[s,l].filter(Boolean).join(" "))}return{...t,...r}}function tt(t){var o,s;let n=(o=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:o.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?t.ref:(n=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var w="Popover",[W]=de(w,[B]),N=B(),[st,v]=W(w),Q=t=>{const{__scopePopover:n,children:r,open:o,defaultOpen:s,onOpenChange:l,modal:a=!1}=t,c=N(n),p=i.useRef(null),[m,j]=i.useState(!1),[x,u]=le({prop:o,defaultProp:s??!1,onChange:l,caller:w});return e.jsx(Ae,{...c,children:e.jsx(st,{scope:n,contentId:ie(),triggerRef:p,open:x,onOpenChange:u,onOpenToggle:i.useCallback(()=>u(h=>!h),[u]),hasCustomAnchor:m,onCustomAnchorAdd:i.useCallback(()=>j(!0),[]),onCustomAnchorRemove:i.useCallback(()=>j(!1),[]),modal:a,children:r})})};Q.displayName=w;var K="PopoverAnchor",rt=i.forwardRef((t,n)=>{const{__scopePopover:r,...o}=t,s=v(K,r),l=N(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:c}=s;return i.useEffect(()=>(a(),()=>c()),[a,c]),e.jsx(q,{...l,...o,ref:n})});rt.displayName=K;var U="PopoverTrigger",G=i.forwardRef((t,n)=>{const{__scopePopover:r,...o}=t,s=v(U,r),l=N(r),a=z(n,s.triggerRef),c=e.jsx($.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ee(s.open),...o,ref:a,onClick:y(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?c:e.jsx(q,{asChild:!0,...l,children:c})});G.displayName=U;var A="PopoverPortal",[at,nt]=W(A,{forceMount:void 0}),X=t=>{const{__scopePopover:n,forceMount:r,children:o,container:s}=t,l=v(A,n);return e.jsx(at,{scope:n,forceMount:r,children:e.jsx(H,{present:r||l.open,children:e.jsx(ce,{asChild:!0,container:s,children:o})})})};X.displayName=A;var C="PopoverContent",Z=i.forwardRef((t,n)=>{const r=nt(C,t.__scopePopover),{forceMount:o=r.forceMount,...s}=t,l=v(C,t.__scopePopover);return e.jsx(H,{present:o||l.open,children:l.modal?e.jsx(lt,{...s,ref:n}):e.jsx(it,{...s,ref:n})})});Z.displayName=C;var ot=Xe("PopoverContent.RemoveScroll"),lt=i.forwardRef((t,n)=>{const r=v(C,t.__scopePopover),o=i.useRef(null),s=z(n,o),l=i.useRef(!1);return i.useEffect(()=>{const a=o.current;if(a)return pe(a)},[]),e.jsx(me,{as:ot,allowPinchZoom:!0,children:e.jsx(J,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:y(t.onCloseAutoFocus,a=>{var c;a.preventDefault(),l.current||(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:y(t.onPointerDownOutside,a=>{const c=a.detail.originalEvent,p=c.button===0&&c.ctrlKey===!0,m=c.button===2||p;l.current=m},{checkForDefaultPrevented:!1}),onFocusOutside:y(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),it=i.forwardRef((t,n)=>{const r=v(C,t.__scopePopover),o=i.useRef(!1),s=i.useRef(!1);return e.jsx(J,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var a,c;(a=t.onCloseAutoFocus)==null||a.call(t,l),l.defaultPrevented||(o.current||(c=r.triggerRef.current)==null||c.focus(),l.preventDefault()),o.current=!1,s.current=!1},onInteractOutside:l=>{var p,m;(p=t.onInteractOutside)==null||p.call(t,l),l.defaultPrevented||(o.current=!0,l.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=l.target;((m=r.triggerRef.current)==null?void 0:m.contains(a))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&s.current&&l.preventDefault()}})}),J=i.forwardRef((t,n)=>{const{__scopePopover:r,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:l,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:p,onFocusOutside:m,onInteractOutside:j,...x}=t,u=v(C,r),h=N(r);return ue(),e.jsx(xe,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:s,onUnmountAutoFocus:l,children:e.jsx(he,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:j,onEscapeKeyDown:c,onPointerDownOutside:p,onFocusOutside:m,onDismiss:()=>u.onOpenChange(!1),children:e.jsx(Se,{"data-state":ee(u.open),role:"dialog",id:u.contentId,...h,...x,ref:n,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Y="PopoverClose",ct=i.forwardRef((t,n)=>{const{__scopePopover:r,...o}=t,s=v(Y,r);return e.jsx($.button,{type:"button",...o,ref:n,onClick:y(t.onClick,()=>s.onOpenChange(!1))})});ct.displayName=Y;var dt="PopoverArrow",pt=i.forwardRef((t,n)=>{const{__scopePopover:r,...o}=t,s=N(r);return e.jsx(_e,{...s,...o,ref:n})});pt.displayName=dt;function ee(t){return t?"open":"closed"}var mt=Q,ut=G,xt=X,te=Z;const ht=mt,ft=ut,se=i.forwardRef(({className:t,align:n="center",sideOffset:r=4,...o},s)=>e.jsx(xt,{children:e.jsx(te,{ref:s,align:n,sideOffset:r,className:fe("z-50 w-72 rounded-md border border-slate-200 bg-white p-4 text-slate-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...o})}));se.displayName=te.displayName;const gt=[{value:"all",label:"All Status"},{value:"scheduled",label:"Scheduled"},{value:"confirmed",label:"Confirmed"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"},{value:"no-show",label:"No Show"}],V={scheduled:"bg-yellow-100 text-yellow-700 border-yellow-200",confirmed:"bg-blue-100 text-blue-700 border-blue-200",completed:"bg-green-100 text-green-700 border-green-200",cancelled:"bg-red-100 text-red-700 border-red-200","no-show":"bg-gray-100 text-gray-700 border-gray-200"};function Mt(){const[t,n]=i.useState(""),[r,o]=i.useState("all"),[s,l]=i.useState(null),[a,c]=i.useState(null),p=ge(),{data:m=[],isLoading:j}=ve({queryKey:["adminAppointments"],queryFn:()=>D.entities.Appointment.list("-appointment_date")}),x=Ne({mutationFn:({id:d,data:f})=>D.entities.Appointment.update(d,f),onSuccess:()=>{p.invalidateQueries({queryKey:["adminAppointments"]}),c(null)}}),u=m.filter(d=>{var S,_,R;const f=((S=d.patient_name)==null?void 0:S.toLowerCase().includes(t.toLowerCase()))||((_=d.patient_phone)==null?void 0:_.includes(t))||((R=d.doctor_name)==null?void 0:R.toLowerCase().includes(t.toLowerCase())),re=r==="all"||d.status===r,ae=!s||d.appointment_date===L(s,"yyyy-MM-dd");return f&&re&&ae}),h=(d,f)=>{x.mutate({id:d,data:{status:f}})};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("header",{className:"bg-white border-b px-6 py-4 sticky top-0 z-40",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(O,{to:E("admin-dashboard"),children:e.jsx(g,{variant:"ghost",size:"icon",children:e.jsx(Be,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Appointments"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage patient appointments"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(g,{variant:"outline",children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsx(O,{to:E("book-appointment"),children:e.jsxs(g,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"New Appointment"]})})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx(k,{className:"mb-6",children:e.jsx(M,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Qe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(be,{placeholder:"Search by patient name, phone, or doctor...",value:t,onChange:d=>n(d.target.value),className:"pl-10"})]}),e.jsxs(Re,{value:r,onValueChange:o,children:[e.jsxs(Oe,{className:"w-full md:w-40",children:[e.jsx(Ke,{className:"w-4 h-4 mr-2"}),e.jsx(Ee,{})]}),e.jsx(De,{children:gt.map(d=>e.jsx(Fe,{value:d.value,children:d.label},d.value))})]}),e.jsxs(ht,{children:[e.jsx(ft,{asChild:!0,children:e.jsxs(g,{variant:"outline",className:"w-full md:w-auto",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),s?L(s,"MMM d, yyyy"):"Filter by Date"]})}),e.jsxs(se,{className:"w-auto p-0",children:[e.jsx(qe,{mode:"single",selected:s,onSelect:l}),s&&e.jsx("div",{className:"p-2 border-t",children:e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"w-full",children:"Clear Filter"})})]})]})]})})}),e.jsxs(k,{children:[e.jsx(Pe,{children:e.jsxs(we,{children:[u.length," Appointments"]})}),e.jsx(M,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Patient"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Doctor"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Date & Time"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-600",children:"Actions"})]})}),e.jsx("tbody",{children:u.map(d=>{var f;return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(I,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.patient_name}),e.jsx("p",{className:"text-sm text-gray-500",children:d.patient_phone})]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.doctor_name||"-"}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:(f=d.department)==null?void 0:f.replace("-"," ")})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.appointment_date}),e.jsx("p",{className:"text-sm text-gray-500",children:d.appointment_time})]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx(F,{className:`${V[d.status]} border`,children:d.status})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs(Me,{children:[e.jsx(Ie,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",children:e.jsx(Te,{className:"w-4 h-4"})})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>c(d),children:"View Details"}),e.jsxs(P,{onClick:()=>h(d.id,"confirmed"),children:[e.jsx(T,{className:"w-4 h-4 mr-2 text-blue-600"}),"Confirm"]}),e.jsxs(P,{onClick:()=>h(d.id,"completed"),children:[e.jsx(T,{className:"w-4 h-4 mr-2 text-green-600"}),"Mark Complete"]}),e.jsxs(P,{onClick:()=>h(d.id,"cancelled"),children:[e.jsx(Ge,{className:"w-4 h-4 mr-2 text-red-600"}),"Cancel"]})]})]})})]},d.id)})})]}),u.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No appointments found"})]})]})})]})]}),e.jsx(Ve,{open:!!a,onOpenChange:()=>c(null),children:e.jsxs(ze,{className:"max-w-md",children:[e.jsx($e,{children:e.jsx(He,{children:"Appointment Details"})}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(I,{className:"w-7 h-7 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-lg",children:a.patient_name}),e.jsx(F,{className:V[a.status],children:a.status})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(je,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:a.patient_phone})]}),a.patient_email&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ce,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:a.patient_email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ye,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:a.doctor_name||a.department})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:[a.appointment_date," at ",a.appointment_time]})]})]}),a.reason&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Reason for Visit"}),e.jsx("p",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:a.reason})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:()=>h(a.id,"completed"),children:"Mark Complete"}),e.jsx(g,{variant:"outline",className:"flex-1",onClick:()=>h(a.id,"cancelled"),children:"Cancel"})]})]})]})})]})}export{Mt as default};

import{c as Q,r as o,w as G,x as $,j as e,L as f,B as r,b as y,P as H,M as U,a as K,y as b}from"./index-CKDgLHdI.js";import{u as R}from"./useMutation-GFGH00zp.js";import{I as i}from"./input-CGa53iuT.js";import{B as w}from"./badge-3BHMSwro.js";import{C as _,a as C}from"./card-OlHfPrnA.js";import{L as n}from"./label-D5wrUxtj.js";import{T as J}from"./textarea-BWjRg0w8.js";import{S as P,b as S,d as A,e as D,f as m}from"./select-Bu5G1x13.js";import{P as W,D as X,a as Y,E as Z,b as ee,c as B,d as L,e as E,f as M,g as k}from"./dropdown-menu-BQ5SA-tU.js";import{A as se}from"./arrow-left-B8Pbgmyj.js";import{D as ae}from"./index-C3M8ivUF.js";import{S as le}from"./search-D2cIqzeq.js";import{L as q}from"./loader-circle-OdDCQPbA.js";import{U as h}from"./user-BbF-KwOM.js";import{E as te}from"./eye-CmhRdKhp.js";import"./chevron-right-BSKquAwy.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],re=Q("SquarePen",ne);function we(){const[c,I]=o.useState(""),[l,j]=o.useState(null),[T,d]=o.useState(!1),[a,t]=o.useState({full_name:"",email:"",phone:"",date_of_birth:"",gender:"",blood_group:"",address:"",city:"",emergency_contact_name:"",emergency_contact_phone:""}),V=G(),{data:z=[],isLoading:F}=$({queryKey:["adminPatients"],queryFn:()=>b.entities.Patient.list("-created_date")}),x=R({mutationFn:s=>b.entities.Patient.create({...s,patient_id:`PAT${Date.now().toString().slice(-6)}`,status:"active"}),onSuccess:()=>{V.invalidateQueries({queryKey:["adminPatients"]}),d(!1),t({full_name:"",email:"",phone:"",date_of_birth:"",gender:"",blood_group:"",address:"",city:"",emergency_contact_name:"",emergency_contact_phone:""})}}),u=z.filter(s=>{var g,p,v,N;return((g=s.full_name)==null?void 0:g.toLowerCase().includes(c.toLowerCase()))||((p=s.phone)==null?void 0:p.includes(c))||((v=s.email)==null?void 0:v.toLowerCase().includes(c.toLowerCase()))||((N=s.patient_id)==null?void 0:N.includes(c))}),O=s=>{s.preventDefault(),x.mutate(a)};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("header",{className:"bg-white border-b px-6 py-4 sticky top-0 z-40",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f,{to:y("AdminDashboard"),children:e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(se,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Patients"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage patient records"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(r,{variant:"outline",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs(r,{className:"bg-blue-600 hover:bg-blue-700",onClick:()=>d(!0),children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"Add Patient"]})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx(_,{className:"mb-6",children:e.jsx(C,{className:"pt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(i,{placeholder:"Search by name, phone, email, or patient ID...",value:c,onChange:s=>I(s.target.value),className:"pl-10"})]})})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:F?e.jsx("div",{className:"col-span-full text-center py-12",children:e.jsx(q,{className:"w-8 h-8 animate-spin mx-auto text-blue-600"})}):u.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(h,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No patients found"})]}):u.map(s=>e.jsx(_,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(C,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(h,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:s.full_name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.patient_id||"N/A"})]})]}),e.jsxs(X,{children:[e.jsx(Y,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(Z,{className:"w-4 h-4"})})}),e.jsxs(ee,{children:[e.jsxs(B,{onClick:()=>j(s),children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(B,{children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Edit"]})]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{children:s.phone||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:s.email||"-"})]}),s.city&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:s.city})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[s.blood_group&&e.jsx(w,{variant:"outline",className:"border-red-200 text-red-600",children:s.blood_group}),e.jsx(w,{className:s.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700",children:s.status||"active"})]})]})},s.id))})]}),e.jsx(L,{open:T,onOpenChange:d,children:e.jsxs(E,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(M,{children:e.jsx(k,{children:"Add New Patient"})}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Full Name *"}),e.jsx(i,{value:a.full_name,onChange:s=>t({...a,full_name:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Phone Number *"}),e.jsx(i,{value:a.phone,onChange:s=>t({...a,phone:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Email"}),e.jsx(i,{type:"email",value:a.email,onChange:s=>t({...a,email:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Date of Birth"}),e.jsx(i,{type:"date",value:a.date_of_birth,onChange:s=>t({...a,date_of_birth:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Gender"}),e.jsxs(P,{value:a.gender,onValueChange:s=>t({...a,gender:s}),children:[e.jsx(S,{children:e.jsx(A,{placeholder:"Select gender"})}),e.jsxs(D,{children:[e.jsx(m,{value:"male",children:"Male"}),e.jsx(m,{value:"female",children:"Female"}),e.jsx(m,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Blood Group"}),e.jsxs(P,{value:a.blood_group,onValueChange:s=>t({...a,blood_group:s}),children:[e.jsx(S,{children:e.jsx(A,{placeholder:"Select blood group"})}),e.jsx(D,{children:["A+","A-","B+","B-","AB+","AB-","O+","O-"].map(s=>e.jsx(m,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(n,{children:"Address"}),e.jsx(J,{value:a.address,onChange:s=>t({...a,address:s.target.value}),rows:2})]}),e.jsxs("div",{children:[e.jsx(n,{children:"City"}),e.jsx(i,{value:a.city,onChange:s=>t({...a,city:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Emergency Contact Name"}),e.jsx(i,{value:a.emergency_contact_name,onChange:s=>t({...a,emergency_contact_name:s.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(n,{children:"Emergency Contact Phone"}),e.jsx(i,{value:a.emergency_contact_phone,onChange:s=>t({...a,emergency_contact_phone:s.target.value})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(r,{type:"submit",disabled:x.isPending,children:x.isPending?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-4 h-4 mr-2 animate-spin"})," Saving..."]}):"Add Patient"})]})]})]})}),e.jsx(L,{open:!!l,onOpenChange:()=>j(null),children:e.jsxs(E,{className:"max-w-md",children:[e.jsx(M,{children:e.jsx(k,{children:"Patient Details"})}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(h,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-lg",children:l.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:l.patient_id})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Phone"}),e.jsx("p",{className:"font-medium",children:l.phone||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium truncate",children:l.email||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Gender"}),e.jsx("p",{className:"font-medium capitalize",children:l.gender||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Blood Group"}),e.jsx("p",{className:"font-medium",children:l.blood_group||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-gray-500",children:"Address"}),e.jsx("p",{className:"font-medium",children:l.address?`${l.address}, ${l.city}`:"-"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{to:y(`BookAppointment?patient=${l.id}`),className:"flex-1",children:e.jsx(r,{className:"w-full",children:"Book Appointment"})}),e.jsx(r,{variant:"outline",className:"flex-1",children:"View History"})]})]})]})})]})}export{we as default};

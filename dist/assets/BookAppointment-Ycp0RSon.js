import{r as c,x as A,j as e,B as m,R as D,S as F,C as B,A as R,y as f}from"./index-CKDgLHdI.js";import{u as T}from"./useMutation-GFGH00zp.js";import{I as d}from"./input-CGa53iuT.js";import{T as N}from"./textarea-BWjRg0w8.js";import{L as l}from"./label-D5wrUxtj.js";import{C as L,i as E}from"./calendar-DRAHtu_D.js";import"./select-Bu5G1x13.js";import{m as o}from"./proxy-DDuoWGuh.js";import{C as v}from"./circle-check-CTllmtq5.js";import{A as $}from"./index-DYMIwrz0.js";import{B as O}from"./building-2-BmddKiRE.js";import{s as G,f as h}from"./format-SmSpYad1.js";import{U as q}from"./user-BbF-KwOM.js";import{F as z}from"./file-text-CgD8E1AB.js";import{A as K}from"./arrow-left-B8Pbgmyj.js";import{L as U}from"./loader-circle-OdDCQPbA.js";import"./chevron-right-BSKquAwy.js";import"./chevron-left-B9hVf-w9.js";function V(){return G(Date.now())}const I=[{value:"gastroenterology",label:"Gastroenterology",icon:"ðŸ«„"},{value:"gynaecology",label:"Gynaecology",icon:"ðŸ‘©â€âš•ï¸"},{value:"orthopaedics",label:"Orthopaedics",icon:"ðŸ¦´"},{value:"general-medicine",label:"General Medicine",icon:"ðŸ©º"},{value:"cardiology",label:"Cardiology",icon:"â¤ï¸"},{value:"paediatrics",label:"Paediatrics",icon:"ðŸ‘¶"},{value:"critical-care",label:"Critical Care & Anaesthesia",icon:"ðŸ¥"}],Y=["09:00 AM","09:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM","05:00 PM","05:30 PM","06:00 PM","06:30 PM","07:00 PM","07:30 PM"],H=[{id:"1",name:"Dr. Rajesh Kumar",department:"gastroenterology",consultation_fee:500},{id:"2",name:"Dr. Priya Sharma",department:"gynaecology",consultation_fee:400},{id:"3",name:"Dr. Venkat Rao",department:"orthopaedics",consultation_fee:500},{id:"4",name:"Dr. Lakshmi Devi",department:"cardiology",consultation_fee:600},{id:"5",name:"Dr. Suresh Reddy",department:"general-medicine",consultation_fee:300},{id:"6",name:"Dr. Kavitha Rani",department:"paediatrics",consultation_fee:400}];function ue(){var b;const _=new URLSearchParams(window.location.search).get("doctor"),[n,u]=c.useState(1),[t,i]=c.useState({department:"",doctor_id:_||"",appointment_date:null,appointment_time:"",patient_name:"",patient_phone:"",patient_email:"",age:"",gender:"",reason:"",symptoms:""}),[w,g]=c.useState(!1),[Q,j]=c.useState(null),{data:y=[]}=A({queryKey:["doctors"],queryFn:()=>f.entities.Doctor.list()}),x=y.length>0?y:H,M=t.department?x.filter(a=>a.department===t.department):x,s=x.find(a=>a.id===t.doctor_id),p=T({mutationFn:a=>f.entities.Appointment.create(a),onSuccess:a=>{j(a),g(!0)}}),C=()=>{n<5&&u(n+1)},S=()=>{n>1&&u(n-1)},P=()=>{p.mutate({...t,doctor_name:s==null?void 0:s.name,appointment_date:t.appointment_date?h(t.appointment_date,"yyyy-MM-dd"):"",consultation_fee:s==null?void 0:s.consultation_fee,status:"scheduled"},{onSuccess:a=>{fetch("/api/sync-appointment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.patient_name,phone:t.patient_phone,date:t.appointment_date,department:t.department})}).catch(r=>console.error("Sync failed",r)),j(a),g(!0)}})},k=()=>{switch(n){case 1:return t.department;case 2:return t.doctor_id;case 3:return t.appointment_date&&t.appointment_time;case 4:return t.patient_name&&t.patient_phone&&t.gender;case 5:return!0;default:return!1}};return w?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center py-12 px-4",children:e.jsxs(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl p-8 md:p-12 shadow-2xl max-w-lg w-full text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(v,{className:"w-10 h-10 text-green-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Appointment Booked!"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Your appointment has been successfully scheduled. You will receive a confirmation SMS shortly."}),e.jsx("div",{className:"bg-gray-50 rounded-2xl p-6 text-left mb-8",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Doctor"}),e.jsx("span",{className:"font-semibold",children:s==null?void 0:s.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date"}),e.jsx("span",{className:"font-semibold",children:t.appointment_date&&h(t.appointment_date,"dd MMM yyyy")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Time"}),e.jsx("span",{className:"font-semibold",children:t.appointment_time})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Patient"}),e.jsx("span",{className:"font-semibold",children:t.patient_name})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>window.location.href="/",children:"Back to Home"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["For any queries, call us at ",e.jsx("a",{href:"tel:08632233644",className:"text-blue-600",children:"0863-2233644"})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Book an Appointment"}),e.jsx("p",{className:"text-gray-600",children:"Schedule your visit with our expert doctors"})]}),e.jsx("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4,5].map((a,r)=>e.jsxs(D.Fragment,{children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-colors ${n>=a?"bg-blue-600 text-white":"bg-gray-200 text-gray-500"}`,children:a}),r<4&&e.jsx("div",{className:`w-16 md:w-24 h-1 ${n>a?"bg-blue-600":"bg-gray-200"}`})]},a))}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 md:p-8",children:[e.jsxs($,{mode:"wait",children:[n===1&&e.jsxs(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(O,{className:"w-6 h-6 text-blue-600"}),"Select Department"]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:I.map(a=>e.jsxs("button",{onClick:()=>i({...t,department:a.value,doctor_id:""}),className:`p-4 rounded-xl border-2 transition-all text-left flex items-center gap-3 ${t.department===a.value?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx("span",{className:"text-2xl",children:a.icon}),e.jsx("span",{className:"font-medium text-gray-900",children:a.label})]},a.value))})]},"step1"),n===2&&e.jsxs(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(F,{className:"w-6 h-6 text-blue-600"}),"Select Doctor"]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:M.map(a=>{var r;return e.jsxs("button",{onClick:()=>i({...t,doctor_id:a.id}),className:`p-4 rounded-xl border-2 transition-all text-left ${t.doctor_id===a.id?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:(r=a.department)==null?void 0:r.replace("-"," ")}),e.jsxs("p",{className:"text-blue-600 font-medium mt-2",children:["â‚¹",a.consultation_fee]})]},a.id)})})]},"step2"),n===3&&e.jsxs(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(B,{className:"w-6 h-6 text-blue-600"}),"Select Date & Time"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx(l,{className:"mb-2 block",children:"Select Date"}),e.jsx(L,{mode:"single",selected:t.appointment_date,onSelect:a=>i({...t,appointment_date:a}),disabled:a=>E(a,V()),className:"rounded-xl border"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"mb-2 block",children:"Select Time Slot"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-80 overflow-y-auto pr-2",children:Y.map(a=>e.jsx("button",{onClick:()=>i({...t,appointment_time:a}),className:`py-2 px-3 rounded-lg text-sm font-medium transition-colors ${t.appointment_time===a?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:a},a))})]})]})]},"step3"),n===4&&e.jsxs(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(q,{className:"w-6 h-6 text-blue-600"}),"Patient Details"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",children:"Full Name *"}),e.jsx(d,{id:"name",value:t.patient_name,onChange:a=>i({...t,patient_name:a.target.value}),placeholder:"Enter patient name",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(d,{id:"phone",value:t.patient_phone,onChange:a=>i({...t,patient_phone:a.target.value}),placeholder:"Enter phone number",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",children:"Email Address"}),e.jsx(d,{id:"email",type:"email",value:t.patient_email,onChange:a=>i({...t,patient_email:a.target.value}),placeholder:"Enter email",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"age",children:"Age"}),e.jsx(d,{id:"age",type:"number",value:t.age,onChange:a=>i({...t,age:a.target.value}),placeholder:"Enter age",className:"mt-1"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{children:"Gender *"}),e.jsx("div",{className:"flex gap-4 mt-2",children:["male","female","other"].map(a=>e.jsx("button",{onClick:()=>i({...t,gender:a}),className:`px-6 py-2 rounded-lg capitalize transition-colors ${t.gender===a?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:a},a))})]})]})]},"step4"),n===5&&e.jsxs(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(z,{className:"w-6 h-6 text-blue-600"}),"Reason for Visit"]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"reason",children:"Reason for Visit"}),e.jsx(N,{id:"reason",value:t.reason,onChange:a=>i({...t,reason:a.target.value}),placeholder:"Briefly describe the reason for your visit",className:"mt-1",rows:3})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"symptoms",children:"Symptoms (if any)"}),e.jsx(N,{id:"symptoms",value:t.symptoms,onChange:a=>i({...t,symptoms:a.target.value}),placeholder:"List any symptoms you're experiencing",className:"mt-1",rows:3})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-2xl p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Appointment Summary"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Doctor:"}),e.jsx("span",{className:"ml-2 font-medium",children:s==null?void 0:s.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Department:"}),e.jsx("span",{className:"ml-2 font-medium capitalize",children:(b=t.department)==null?void 0:b.replace("-"," ")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{className:"ml-2 font-medium",children:t.appointment_date&&h(t.appointment_date,"dd MMM yyyy")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Time:"}),e.jsx("span",{className:"ml-2 font-medium",children:t.appointment_time})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Patient:"}),e.jsx("span",{className:"ml-2 font-medium",children:t.patient_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Consultation Fee:"}),e.jsxs("span",{className:"ml-2 font-medium text-green-600",children:["â‚¹",s==null?void 0:s.consultation_fee]})]})]})]})]},"step5")]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs(m,{variant:"outline",onClick:S,disabled:n===1,className:"gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Back"]}),n<5?e.jsxs(m,{onClick:C,disabled:!k(),className:"gap-2 bg-blue-600 hover:bg-blue-700",children:["Next",e.jsx(R,{className:"w-4 h-4"})]}):e.jsx(m,{onClick:P,disabled:p.isPending,className:"gap-2 bg-green-600 hover:bg-green-700",children:p.isPending?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4 animate-spin"}),"Booking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-4 h-4"}),"Confirm Booking"]})})]})]})]})})}export{ue as default};

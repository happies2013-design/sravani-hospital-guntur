import{r as m,Y as J,u as X,j as e,l as T,i as Z,m as R,n as ee,p as se,v as F,x as I,B as b,A as te,y as j,C as f,L as k,b as P,g as ae}from"./index-CKDgLHdI.js";import"./input-CGa53iuT.js";import{B as D}from"./badge-3BHMSwro.js";import{R as ie,I as ne,c as S,D as le}from"./index-C3M8ivUF.js";import{C as h,a as u,b as v,c as w}from"./card-OlHfPrnA.js";import{L as re}from"./loader-circle-OdDCQPbA.js";import{m as B}from"./proxy-DDuoWGuh.js";import{U as ce}from"./user-BbF-KwOM.js";import{F as _}from"./file-text-CgD8E1AB.js";import{C}from"./credit-card-CLngxoaq.js";var A="Tabs",[oe]=se(A,[S]),E=S(),[de,M]=oe(A),L=m.forwardRef((s,a)=>{const{__scopeTabs:l,value:r,onValueChange:c,defaultValue:d,orientation:i="horizontal",dir:x,activationMode:p="automatic",...t}=s,n=J(x),[o,g]=X({prop:r,onChange:c,defaultProp:d??"",caller:A});return e.jsx(de,{scope:l,baseId:Z(),value:o,onValueChange:g,orientation:i,dir:n,activationMode:p,children:e.jsx(T.div,{dir:n,"data-orientation":i,...t,ref:a})})});L.displayName=A;var V="TabsList",$=m.forwardRef((s,a)=>{const{__scopeTabs:l,loop:r=!0,...c}=s,d=M(V,l),i=E(l);return e.jsx(ie,{asChild:!0,...i,orientation:d.orientation,dir:d.dir,loop:r,children:e.jsx(T.div,{role:"tablist","aria-orientation":d.orientation,...c,ref:a})})});$.displayName=V;var q="TabsTrigger",G=m.forwardRef((s,a)=>{const{__scopeTabs:l,value:r,disabled:c=!1,...d}=s,i=M(q,l),x=E(l),p=z(i.baseId,r),t=U(i.baseId,r),n=r===i.value;return e.jsx(ne,{asChild:!0,...x,focusable:!c,active:n,children:e.jsx(T.button,{type:"button",role:"tab","aria-selected":n,"aria-controls":t,"data-state":n?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:p,...d,ref:a,onMouseDown:R(s.onMouseDown,o=>{!c&&o.button===0&&o.ctrlKey===!1?i.onValueChange(r):o.preventDefault()}),onKeyDown:R(s.onKeyDown,o=>{[" ","Enter"].includes(o.key)&&i.onValueChange(r)}),onFocus:R(s.onFocus,()=>{const o=i.activationMode!=="manual";!n&&!c&&o&&i.onValueChange(r)})})})});G.displayName=q;var K="TabsContent",Y=m.forwardRef((s,a)=>{const{__scopeTabs:l,value:r,forceMount:c,children:d,...i}=s,x=M(K,l),p=z(x.baseId,r),t=U(x.baseId,r),n=r===x.value,o=m.useRef(n);return m.useEffect(()=>{const g=requestAnimationFrame(()=>o.current=!1);return()=>cancelAnimationFrame(g)},[]),e.jsx(ee,{present:c||n,children:({present:g})=>e.jsx(T.div,{"data-state":n?"active":"inactive","data-orientation":x.orientation,role:"tabpanel","aria-labelledby":p,hidden:!g,id:t,tabIndex:0,...i,ref:a,style:{...s.style,animationDuration:o.current?"0s":void 0},children:g&&d})})});Y.displayName=K;function z(s,a){return`${s}-trigger-${a}`}function U(s,a){return`${s}-content-${a}`}var me=L,H=$,O=G,W=Y;const xe=me,Q=m.forwardRef(({className:s,...a},l)=>e.jsx(H,{ref:l,className:F("inline-flex h-9 items-center justify-center rounded-lg bg-slate-100 p-1 text-slate-500",s),...a}));Q.displayName=H.displayName;const N=m.forwardRef(({className:s,...a},l)=>e.jsx(O,{ref:l,className:F("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow",s),...a}));N.displayName=O.displayName;const y=m.forwardRef(({className:s,...a},l)=>e.jsx(W,{ref:l,className:F("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2",s),...a}));y.displayName=W.displayName;function we(){const[s,a]=m.useState(null),[l,r]=m.useState(!0);m.useEffect(()=>{(async()=>{try{if(await j.auth.isAuthenticated()){const o=await j.auth.me();a(o)}}catch{console.log("Not authenticated")}finally{r(!1)}})()},[]);const{data:c=[]}=I({queryKey:["patientAppointments",s==null?void 0:s.email],queryFn:async()=>s!=null&&s.email?j.entities.Appointment.filter({patient_email:s.email},"-appointment_date"):[],enabled:!!(s!=null&&s.email)}),{data:d=[]}=I({queryKey:["patientRecords",s==null?void 0:s.email],queryFn:async()=>s!=null&&s.email?j.entities.MedicalRecord.filter({created_by:s.email},"-record_date"):[],enabled:!!(s!=null&&s.email)}),{data:i=[]}=I({queryKey:["patientInvoices",s==null?void 0:s.email],queryFn:async()=>s!=null&&s.email?j.entities.Invoice.filter({created_by:s.email},"-created_date"):[],enabled:!!(s!=null&&s.email)});if(l)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(re,{className:"w-8 h-8 animate-spin text-blue-600"})});if(!s)return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("section",{className:"bg-gradient-to-br from-blue-600 to-blue-800 py-20",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 text-center",children:e.jsxs(B.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"text-white",children:[e.jsx(ce,{className:"w-16 h-16 mx-auto mb-6 text-blue-200"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Patient Portal"}),e.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Access your medical records, appointments, and billing information"}),e.jsxs(b,{size:"lg",className:"bg-white text-blue-600 hover:bg-blue-50",onClick:()=>j.auth.redirectToLogin(),children:["Sign In to Your Account",e.jsx(te,{className:"w-5 h-5 ml-2"})]})]})})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"What You Can Do"})}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:f,title:"Manage Appointments",description:"View, reschedule, or cancel your upcoming appointments easily"},{icon:_,title:"Medical Records",description:"Access your prescriptions, lab reports, and medical history"},{icon:C,title:"Billing & Payments",description:"View invoices, make payments, and track insurance claims"}].map((t,n)=>e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 text-center",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(t.icon,{className:"w-7 h-7 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:t.description})]},t.title))})]})}),e.jsx("section",{className:"py-12 bg-blue-600",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"New Patient?"}),e.jsx("p",{className:"text-blue-100 mb-6",children:"Book your first appointment and we'll create your account automatically."}),e.jsx(k,{to:P("book-appointment"),children:e.jsxs(b,{size:"lg",className:"bg-white text-blue-600 hover:bg-blue-50",children:[e.jsx(f,{className:"w-5 h-5 mr-2"}),"Book Appointment"]})})]})})]});const x={scheduled:"bg-yellow-100 text-yellow-700",confirmed:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700",cancelled:"bg-red-100 text-red-700","no-show":"bg-gray-100 text-gray-700"},p=c.filter(t=>new Date(t.appointment_date)>=new Date&&t.status!=="cancelled");return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("section",{className:"bg-gradient-to-br from-blue-600 to-blue-800 py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-200",children:"Welcome back,"}),e.jsx("h1",{className:"text-2xl font-bold",children:s.full_name||s.email})]}),e.jsx(b,{variant:"outline",className:"border-white text-white hover:bg-white/10",onClick:()=>j.auth.logout(),children:"Sign Out"})]})})}),e.jsx("section",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:[e.jsx(h,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(f,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:p.length}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Upcoming Appointments"})]})]})})}),e.jsx(h,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(_,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:d.length}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Medical Records"})]})]})})}),e.jsx(h,{children:e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center",children:e.jsx(C,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:i.filter(t=>t.payment_status==="pending").length}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Pending Bills"})]})]})})}),e.jsx(h,{children:e.jsx(u,{className:"pt-6",children:e.jsx(k,{to:P("book-appointment"),children:e.jsxs(b,{className:"w-full h-full bg-blue-600 hover:bg-blue-700",children:[e.jsx(f,{className:"w-5 h-5 mr-2"}),"Book Appointment"]})})})})]}),e.jsxs(xe,{defaultValue:"appointments",className:"space-y-6",children:[e.jsxs(Q,{className:"bg-white shadow-sm",children:[e.jsx(N,{value:"appointments",children:"Appointments"}),e.jsx(N,{value:"records",children:"Medical Records"}),e.jsx(N,{value:"billing",children:"Billing"}),e.jsx(N,{value:"profile",children:"Profile"})]}),e.jsx(y,{value:"appointments",children:e.jsxs(h,{children:[e.jsx(v,{children:e.jsx(w,{children:"Your Appointments"})}),e.jsx(u,{children:c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(f,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No appointments found"}),e.jsx(k,{to:P("book-appointment"),children:e.jsx(b,{className:"mt-4",children:"Book Your First Appointment"})})]}):e.jsx("div",{className:"space-y-4",children:c.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center",children:e.jsx(f,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.doctor_name||"Doctor"}),e.jsx("p",{className:"text-gray-600 text-sm",children:t.department}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mt-1",children:[e.jsx(ae,{className:"w-4 h-4"}),t.appointment_date," at ",t.appointment_time]})]})]}),e.jsx(D,{className:x[t.status]||"bg-gray-100",children:t.status})]},t.id))})})]})}),e.jsx(y,{value:"records",children:e.jsxs(h,{children:[e.jsx(v,{children:e.jsx(w,{children:"Medical Records"})}),e.jsx(u,{children:d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(_,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No medical records found"})]}):e.jsx("div",{className:"space-y-4",children:d.map(t=>{var n;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center",children:e.jsx(_,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.title}),e.jsx("p",{className:"text-gray-600 text-sm capitalize",children:(n=t.record_type)==null?void 0:n.replace("-"," ")}),e.jsx("p",{className:"text-sm text-gray-500",children:t.record_date})]})]}),t.file_url&&e.jsx("a",{href:t.file_url,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(b,{variant:"outline",size:"sm",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Download"]})})]},t.id)})})})]})}),e.jsx(y,{value:"billing",children:e.jsxs(h,{children:[e.jsx(v,{children:e.jsx(w,{children:"Billing & Invoices"})}),e.jsx(u,{children:i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(C,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No invoices found"})]}):e.jsx("div",{className:"space-y-4",children:i.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center",children:e.jsx(C,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:["Invoice #",t.invoice_number]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["â‚¹",t.total_amount]})]})]}),e.jsx(D,{className:t.payment_status==="paid"?"bg-green-100 text-green-700":t.payment_status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700",children:t.payment_status})]},t.id))})})]})}),e.jsx(y,{value:"profile",children:e.jsxs(h,{children:[e.jsx(v,{children:e.jsx(w,{children:"Your Profile"})}),e.jsx(u,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Full Name"}),e.jsx("p",{className:"font-medium",children:s.full_name||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium",children:s.email})]})]})})})]})})]})]})})]})}export{we as default};
